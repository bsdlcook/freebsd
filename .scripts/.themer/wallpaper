#!/usr/bin/env bash
#--------------------- Check for wallpaper variable in theme conf.
if [ -n "$wallpaper" ]; then
	cp "$scriptdir/.themer/bg/$wallpaper.png" "$scriptdir/.themer/.background.png"
#--------------------- Check for solid_background variable in theme conf.
elif [ -n "$solid_background" ]; then
#--------------------- Generate solid background wallpaper.
	convert -size 2560x1080 canvas:"$solid_background" "$scriptdir/.themer/.background.png"
else
#--------------------- Generate wallpaper with icon.
	sed -i "" -r "s/(fill|stroke|stop-color)(=|:)(\"?)#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})(\"?)/\1\2\3$accent\5/g" "$scriptdir/.themer/.icon.svg"
	convert -size 2560x1080 canvas:"$background" -gravity center -background none -size x600 "$scriptdir/.themer/.icon.svg" -composite "$scriptdir/.themer/.background.png"
fi
#--------------------- Set new wallpaper.
source "$scriptdir/background"
#---------------------
